(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{172:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var a=r(5155),s=r(2115),i=r(3536);function d(){let[e,t]=(0,s.useState)(null),[r,d]=(0,s.useState)(!0),[l,n]=(0,s.useState)(null);(0,s.useEffect)(()=>{!async function(){try{let{data:{user:e}}=await i.N.auth.getUser();if(!e)throw Error("User not authenticated");let{data:r,error:a}=await i.N.from("subscriptions").select("*").eq("user_id",e.id).single();if(a&&"PGRST116"!==a.code)throw a;t(r)}catch(e){n(e.message||"Failed to load subscription information")}finally{d(!1)}}()},[]);let c=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric",year:"numeric"}).format(t)};return r?(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),(0,a.jsx)("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded"}),(0,a.jsx)("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded"}),(0,a.jsx)("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded"})]}):l?(0,a.jsx)("div",{className:"bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-200 p-4 rounded-md",children:l}):e?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Monthly Plan"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"$50/month for up to 50 video lessons"})]}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat((e=>{switch(e){case"active":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"canceled":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"past_due":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}})(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:(0,a.jsxs)("dl",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[(0,a.jsxs)("div",{className:"py-3 flex justify-between",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Video credits remaining"}),(0,a.jsx)("dd",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.video_credits_remaining})]}),(0,a.jsxs)("div",{className:"py-3 flex justify-between",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Started on"}),(0,a.jsx)("dd",{className:"text-sm text-gray-900 dark:text-white",children:c(e.started_at)})]}),(0,a.jsxs)("div",{className:"py-3 flex justify-between",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Renews on"}),(0,a.jsx)("dd",{className:"text-sm text-gray-900 dark:text-white",children:c(e.expires_at)})]})]})}),(0,a.jsxs)("div",{className:"pt-4 flex space-x-3",children:[(0,a.jsx)("button",{className:"btn-secondary text-sm",children:"Manage Billing"}),"active"===e.status&&(0,a.jsx)("button",{className:"text-sm text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:"Cancel Subscription"})]})]}):(0,a.jsxs)("div",{className:"text-center py-6",children:[(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"You don't have an active subscription."}),(0,a.jsx)("button",{className:"btn-primary",children:"Subscribe Now"})]})}},852:(e,t,r)=>{"use strict";r.d(t,{D:()=>l,ThemeProvider:()=>d});var a=r(5155),s=r(2115);let i=(0,s.createContext)(void 0);function d(e){let{children:t}=e,[r,d]=(0,s.useState)("light");return(0,s.useEffect)(()=>{let e=localStorage.getItem("theme");if(e)d(e),document.documentElement.classList.toggle("dark","dark"===e);else{let e=window.matchMedia("(prefers-color-scheme: dark)").matches;d(e?"dark":"light"),document.documentElement.classList.toggle("dark",e)}},[]),(0,a.jsx)(i.Provider,{value:{theme:r,toggleTheme:()=>{let e="light"===r?"dark":"light";d(e),localStorage.setItem("theme",e),document.documentElement.classList.toggle("dark","dark"===e)}},children:t})}function l(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},3536:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});let a=(0,r(1935).createBrowserClient)("https://tzekravlcxjpfeetbsfr.supabase.com","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR6ZWtyYXZsY3hqcGZlZXRic2ZyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU1MDE1NjIsImV4cCI6MjA2MTA3NzU2Mn0.t1gqnRPUqXQpK62v0dA8Iqu7y8Lm0u_5VWBWHzdeKKY")},4388:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var a=r(5155),s=r(2115),i=r(3536);function d(){let[e,t]=(0,s.useState)(null),[r,d]=(0,s.useState)(!1),[l,n]=(0,s.useState)(null),[c,o]=(0,s.useState)(null),x=[{id:1,name:"Basic",credits:10,price:15},{id:2,name:"Standard",credits:25,price:30,popular:!0},{id:3,name:"Premium",credits:50,price:50}],m=e=>{t(e),n(null),o(null)},h=async()=>{if(!e){n("Please select a credit package");return}d(!0),n(null),o(null);try{let{data:{user:t}}=await i.N.auth.getUser();if(!t)throw Error("User not authenticated");let r=x.find(t=>t.id===e);if(!r)throw Error("Invalid package selected");let{data:a,error:s}=await i.N.from("subscriptions").update({video_credits_remaining:i.N.rpc("increment_credits",{credit_amount:r.credits})}).eq("user_id",t.id).select();if(s)throw s;o("Successfully purchased ".concat(r.credits," video credits!"))}catch(e){n(e.message||"Failed to process purchase")}finally{d(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:x.map(t=>(0,a.jsxs)("div",{className:"relative border rounded-lg p-4 transition-all ".concat(e===t.id?"border-blue-500 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"),onClick:()=>m(t.id),children:[t.popular&&(0,a.jsx)("span",{className:"absolute -top-2 -right-2 bg-blue-500 text-white text-xs px-2 py-0.5 rounded-full",children:"Popular"}),(0,a.jsxs)("h3",{className:"font-medium text-gray-900 dark:text-white",children:[t.name," Package"]}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:["$",t.price]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[t.credits," video credits"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:["$",(t.price/t.credits).toFixed(2)," per credit"]})]},t.id))}),l&&(0,a.jsx)("div",{className:"bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-200 p-3 rounded-md text-sm",children:l}),c&&(0,a.jsx)("div",{className:"bg-green-50 dark:bg-green-900/30 text-green-800 dark:text-green-200 p-3 rounded-md text-sm",children:c}),(0,a.jsx)("button",{className:"w-full btn-primary ".concat(r?"opacity-70 cursor-not-allowed":""),onClick:h,disabled:r||!e,children:r?"Processing...":"Purchase Credits"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"Secure payment processing. Credits are added immediately to your account."})]})}},6674:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var a=r(5155),s=r(852),i=r(9932);function d(){let{theme:e,toggleTheme:t}=(0,s.D)();return(0,a.jsx)("button",{onClick:t,className:"relative inline-flex h-10 w-10 items-center justify-center rounded-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800","aria-label":"Switch to ".concat("light"===e?"dark":"light"," mode"),children:"light"===e?(0,a.jsx)(i.P.svg,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"h-5 w-5",initial:{rotate:-45},animate:{rotate:0},transition:{duration:.3},children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):(0,a.jsxs)(i.P.svg,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"h-5 w-5",initial:{rotate:45},animate:{rotate:0},transition:{duration:.3},children:[(0,a.jsx)("circle",{cx:12,cy:12,r:5,strokeWidth:2}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]})})}},7443:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var a=r(5155),s=r(2115),i=r(6874),d=r.n(i),l=r(5695),n=r(3536),c=r(6674);function o(e){let{children:t}=e,r=(0,l.usePathname)(),i=(0,l.useRouter)(),[o,x]=(0,s.useState)(!1),m=[{name:"Dashboard",href:"/dashboard",icon:"\uD83D\uDCCA"},{name:"Homework",href:"/homework",icon:"\uD83D\uDCDD"},{name:"Video Lessons",href:"/video",icon:"\uD83C\uDFAC"},{name:"Progress",href:"/progress",icon:"\uD83D\uDCC8"},{name:"Subscription",href:"/subscription",icon:"\uD83D\uDCB3"}],h=async()=>{await n.N.auth.signOut(),i.push("/"),i.refresh()};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"fixed inset-0 flex z-40 md:hidden ".concat(o?"block":"hidden"),children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>x(!1)}),(0,a.jsxs)("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white dark:bg-gray-800",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:(0,a.jsxs)("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>x(!1),children:[(0,a.jsx)("span",{className:"sr-only",children:"Close sidebar"}),(0,a.jsx)("span",{className:"text-white",children:"✕"})]})}),(0,a.jsxs)("div",{className:"flex-1 h-0 pt-5 pb-4 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 flex items-center justify-between px-4",children:[(0,a.jsx)("span",{className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:"Bonsai Prep"}),(0,a.jsx)(c.default,{})]}),(0,a.jsx)("nav",{className:"mt-5 px-2 space-y-1",children:m.map(e=>(0,a.jsxs)(d(),{href:e.href,className:"group flex items-center px-2 py-2 text-base font-medium rounded-md ".concat(r===e.href?"bg-primary-100 text-primary-900 dark:bg-primary-900 dark:text-primary-100":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white"),children:[(0,a.jsx)("span",{className:"mr-4 h-6 w-6 text-center",children:e.icon}),e.name]},e.name))})]}),(0,a.jsx)("div",{className:"flex-shrink-0 flex border-t border-gray-200 dark:border-gray-700 p-4",children:(0,a.jsx)("button",{onClick:h,className:"flex-shrink-0 group block w-full text-left",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"inline-block h-10 w-10 rounded-full bg-gray-100 dark:bg-gray-700 text-center leading-10",children:"\uD83D\uDC64"})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-base font-medium text-gray-700 dark:text-gray-300",children:"Sign Out"})})]})})})]}),(0,a.jsx)("div",{className:"flex-shrink-0 w-14"})]}),(0,a.jsx)("div",{className:"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0",children:(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-h-0 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 px-4",children:[(0,a.jsx)("span",{className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:"Bonsai Prep"}),(0,a.jsx)(c.default,{})]}),(0,a.jsx)("nav",{className:"mt-5 flex-1 px-2 space-y-1",children:m.map(e=>(0,a.jsxs)(d(),{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md ".concat(r===e.href?"bg-primary-100 text-primary-900 dark:bg-primary-900 dark:text-primary-100":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white"),children:[(0,a.jsx)("span",{className:"mr-3 h-6 w-6 text-center",children:e.icon}),e.name]},e.name))})]}),(0,a.jsx)("div",{className:"flex-shrink-0 flex border-t border-gray-200 dark:border-gray-700 p-4",children:(0,a.jsx)("button",{onClick:h,className:"flex-shrink-0 w-full group block",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"inline-block h-9 w-9 rounded-full bg-gray-100 dark:bg-gray-700 text-center leading-9",children:"\uD83D\uDC64"})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Sign Out"})})]})})})]})}),(0,a.jsxs)("div",{className:"md:pl-64 flex flex-col flex-1",children:[(0,a.jsx)("div",{className:"sticky top-0 z-10 md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3 bg-gray-100 dark:bg-gray-900",children:(0,a.jsxs)("button",{type:"button",className:"-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500",onClick:()=>x(!0),children:[(0,a.jsx)("span",{className:"sr-only",children:"Open sidebar"}),(0,a.jsx)("span",{className:"text-2xl",children:"☰"})]})}),(0,a.jsx)("main",{className:"flex-1",children:t})]})]})}},9343:(e,t,r)=>{Promise.resolve().then(r.bind(r,7443)),Promise.resolve().then(r.bind(r,4388)),Promise.resolve().then(r.bind(r,172))}},e=>{var t=t=>e(e.s=t);e.O(0,[874,769,932,441,684,358],()=>t(9343)),_N_E=e.O()}]);